<!--
  Generated template for the ScorecardPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Carte de score</ion-title>
    <ion-buttons end>
        <button ion-button clear color="primary" (click)="calculateTotal()">Calculer scores
        </button>
      </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-slides pager >
    <ion-slide *ngFor="let participant of game.participantsComplete">
      <h2 style="text-align: center; color: teal" >{{participant.fullname}}</h2>
      <ion-card>
        <ion-item-group>
          <ng-container *ngFor="let hole of game.courseComplete.holesComplete; let i = index">
            <ion-item-divider color="light" *ngIf="i==0">Aller</ion-item-divider>
            <ion-item *ngIf="i==0">
              <ion-row>
                <ion-col col-2>Trou</ion-col>
                <ion-col col-2>Par</ion-col>
                <ion-col col-2>Hdp</ion-col>
                <ion-col col-2>Score</ion-col>
                <ion-col col-2>Brut</ion-col>
                <ion-col col-2>Net</ion-col>
              </ion-row>
            </ion-item>
            <ion-item *ngIf="i<9" (click)="editScore(game, hole, participant)">
              <ion-row>
                <ion-col style="font-weight: bold" col-2>{{hole.num}}</ion-col>
                <ion-col col-2>
                  <ion-badge color="primary" *ngIf="hole.detail.par==4">{{hole.detail.par}}</ion-badge>
                  <ion-badge color="secondary" *ngIf="hole.detail.par==3">{{hole.detail.par}}</ion-badge>
                  <ion-badge color="danger" *ngIf="hole.detail.par==5">{{hole.detail.par}}</ion-badge>
                </ion-col>
                <ion-col col-2>{{hole.handicap}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{game.scores[hole.detail.holeId][participant.uid]}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{calculateGrossPoints(hole.detail.par, game.scores[hole.detail.holeId][participant.uid])}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{calculateNetPoints(hole.handicap, participant, hole.detail.par, game.scores[hole.detail.holeId][participant.uid])}}</ion-col>
              </ion-row>
            </ion-item>
            <ion-item *ngIf="i==9" color="light">
              <ion-row>
                <ion-col style="font-weight: bold" col-2></ion-col>
                <ion-col col-2>
                  <ion-badge color="primary">{{parTotali}}</ion-badge>
                </ion-col>
                <ion-col col-2></ion-col>
                <ion-col col-2>{{totali[participant.uid]}}</ion-col>
                <ion-col col-2>{{totaliBrut[participant.uid]}}</ion-col>
                <ion-col col-2>{{totaliNet[participant.uid]}}</ion-col>
              </ion-row>
            </ion-item>
          </ng-container>
        </ion-item-group>
      </ion-card>
      <ion-card>
        <ion-item-group>
          <ng-container *ngFor="let hole of game.courseComplete.holesComplete; let i = index">
            <ion-item-divider color="light" *ngIf="i==9">Retour</ion-item-divider>
            <ion-item *ngIf="i==9">
              <ion-row>
                <ion-col col-2>Trou</ion-col>
                <ion-col col-2>Par</ion-col>
                <ion-col col-2>Hdp</ion-col>
                <ion-col col-2>Score</ion-col>
                <ion-col col-2>Brut</ion-col>
                <ion-col col-2>Net</ion-col>
              </ion-row>
            </ion-item>
            <ion-item *ngIf="i>=9" (click)="editScore(game, hole, participant)">
              <ion-row>
                <ion-col style="font-weight: bold" col-2>{{hole.num}}</ion-col>
                <ion-col col-2>
                  <ion-badge color="primary" *ngIf="hole.detail.par==4">{{hole.detail.par}}</ion-badge>
                  <ion-badge color="secondary" *ngIf="hole.detail.par==3">{{hole.detail.par}}</ion-badge>
                  <ion-badge color="danger" *ngIf="hole.detail.par==5">{{hole.detail.par}}</ion-badge>
                </ion-col>
                <ion-col col-2>{{hole.handicap}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{game.scores[hole.detail.holeId][participant.uid]}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{calculateGrossPoints(hole.detail.par, game.scores[hole.detail.holeId][participant.uid])}}</ion-col>
                <ion-col col-2 *ngIf="game.scores[hole.detail.holeId]">{{calculateNetPoints(hole.handicap, participant, hole.detail.par, game.scores[hole.detail.holeId][participant.uid])}}</ion-col>
              </ion-row>
            </ion-item>
            <ion-item *ngIf="i==17" color="light">
              <ion-row>
                <ion-col style="font-weight: bold" col-2></ion-col>
                <ion-col col-2>
                  <ion-badge color="primary">{{parTotalo}}</ion-badge>
                </ion-col>
                <ion-col col-2></ion-col>
                <ion-col col-2>{{totalo[participant.uid]}}</ion-col>
                <ion-col col-2>{{totaloBrut[participant.uid]}}</ion-col>
                <ion-col col-2>{{totaloNet[participant.uid]}}</ion-col>
              </ion-row>
            </ion-item>
          </ng-container>
        </ion-item-group>
      </ion-card>
      <ion-card>
        <ion-item-group>
          <ion-item color="dark">
            <ion-row>
              <ion-col style="font-weight: bold" col-2></ion-col>
              <ion-col col-2>
                <ion-badge color="light">{{parTotal}}</ion-badge>
              </ion-col>
              <ion-col col-2></ion-col>
              <ion-col col-2 *ngIf="total">{{total[participant.uid]}}</ion-col>
              <ion-col col-2 *ngIf="totalBrut">{{totalBrut[participant.uid]}}</ion-col>
              <ion-col col-2 *ngIf="totalNet">{{totalNet[participant.uid]}}</ion-col>
            </ion-row>
          </ion-item>
        </ion-item-group>
      </ion-card>
    </ion-slide>
  </ion-slides>

</ion-content>